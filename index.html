<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Heresirc ¬∑ esencia ¬∑ paisajes</title>

    <!-- Fuentes & iconos -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:opsz,wght@14..32,400;14..32,600;14..32,800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">

    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }

        :root {
            --profile-pos-x: 50%;
            --profile-pos-y: 25%;
            --profile-zoom: 1.1;
            --deep-bg: #0c0e19;
            --glow-cyan: rgba(0, 255, 255, 0.3);
            --glass-edge: rgba(255, 255, 255, 0.08);
        }

        body {
            font-family: 'Inter', sans-serif;
            background: var(--deep-bg);
            color: #edeef2;
            overflow-x: hidden;
            scroll-behavior: smooth;
        }

        /* canvas part√≠culas (fondo) */
        #particles-canvas {
            position: fixed;
            top: 0; left: 0;
            width: 100%;
            height: 100%;
            z-index: 0;
            pointer-events: none;
            opacity: 0.7;
            /* performance */
            will-change: transform;
        }

        /* estructura principal */
        .site-wrapper {
            position: relative;
            z-index: 10;
            max-width: 1300px;
            margin: 0 auto;
            padding: 2rem 1.8rem;
            contain: layout style paint;
        }

        /* header con navegaci√≥n flotante */
        .smart-nav {
            display: flex;
            justify-content: center;
            gap: 2rem;
            flex-wrap: wrap;
            margin-bottom: 3.5rem;
            background: rgba(20, 30, 50, 0.3);
            backdrop-filter: blur(15px);
            -webkit-backdrop-filter: blur(15px);
            padding: 1rem 2.5rem;
            border-radius: 60px;
            border: 1px solid var(--glass-edge);
            box-shadow: 0 15px 35px -10px rgba(0,0,0,0.6);
            position: sticky;
            top: 20px;
            z-index: 100;
            width: fit-content;
            margin-left: auto;
            margin-right: auto;
            will-change: transform;
            contain: paint;
        }

        .smart-nav a {
            color: #f0f4ff;
            text-decoration: none;
            font-weight: 600;
            padding: 0.6rem 1.2rem;
            border-radius: 40px;
            transition: transform 0.25s ease, box-shadow 0.25s ease, background 0.25s ease, border-color 0.25s ease;
            background: transparent;
            letter-spacing: 0.5px;
            border: 1px solid transparent;
            will-change: transform;
        }

        .smart-nav a:hover {
            background: rgba(90, 170, 255, 0.2);
            border-color: rgba(90, 200, 255, 0.5);
            box-shadow: 0 0 18px var(--glow-cyan);
            transform: translateY(-3px);
        }

        /* cards principales con efecto glass + profundidad */
        .hero-card {
            background: rgba(18, 25, 40, 0.45);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border-radius: 4rem;
            padding: 3.5rem 3rem;
            border: 1px solid var(--glass-edge);
            box-shadow: 0 40px 70px -20px #00000080, 0 0 0 1px rgba(120, 200, 255, 0.15) inset;
            transition: transform 0.4s cubic-bezier(0.2, 0.9, 0.3, 1), box-shadow 0.5s;
            margin-bottom: 4rem;
            contain: content;
        }

        .hero-card:hover {
            box-shadow: 0 45px 80px -15px #2f5a8c, 0 0 0 2px rgba(80, 180, 255, 0.3) inset;
        }

        /* Perfil con doble borde animado */
        .avatar-cosmic {
            width: 190px;
            height: 190px;
            margin: 0 auto 2rem;
            border-radius: 50%;
            padding: 7px;
            background: conic-gradient(from 0deg, #ff6ec4, #7873f5, #3b9eff, #6effb0, #ff6ec4);
            animation: rotateConic 8s linear infinite;
            box-shadow: 0 20px 40px -5px #3f9eff;
            overflow: hidden;
            position: relative;
            will-change: transform;
            contain: paint;
        }

        @keyframes rotateConic {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .profile-img {
            display: block;
            position: absolute;
            inset: 7px;
            width: calc(100% - 14px);
            height: calc(100% - 14px);
            object-fit: cover;
            object-position: var(--profile-pos-x) var(--profile-pos-y);
            border-radius: 50%;
            border: 4px solid #0e1a28;
            transform: scale(var(--profile-zoom));
            transition: transform 0.35s ease, filter 0.35s ease;
            filter: contrast(1.1) saturate(1.1) brightness(1.03);
            will-change: transform, filter;
        }

        .profile-img:hover {
            transform: scale(calc(var(--profile-zoom) + 0.07));
            filter: contrast(1.2) brightness(1.1);
        }

        /* glitch principal */
        .glitch-big {
            font-size: 4.5rem;
            font-weight: 800;
            text-align: center;
            letter-spacing: 6px;
            color: white;
            text-shadow: 0.05em 0 0 rgba(255, 50, 100, 0.7), -0.05em -0.025em 0 rgba(30, 210, 255, 0.7);
            animation: glitchSkew 3s infinite alternate;
            will-change: transform;
        }

        @keyframes glitchSkew {
            0% { transform: skew(0deg); }
            20% { transform: skew(2deg); }
            40% { transform: skew(-2deg); }
            60% { transform: skew(1deg); }
            80% { transform: skew(-1deg); }
            100% { transform: skew(0deg); }
        }

        .bio-neon {
            text-align: center;
            font-size: 1.7rem;
            font-weight: 600;
            margin: 1rem 0 2rem;
            background: linear-gradient(135deg, #b5f0ff, #d4c4ff, #ffc6e8);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        /* redes sociales con efecto magn√©tico suave */
        .social-orbit {
            display: flex;
            gap: 1.5rem;
            justify-content: center;
            margin: 2.8rem 0 2rem;
            contain: paint;
        }

        .social-ring {
            width: 68px;
            height: 68px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.03);
            backdrop-filter: blur(6px);
            border: 1px solid rgba(255, 255, 255, 0.15);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2.2rem;
            color: white;
            text-decoration: none;
            transition: transform 0.25s ease, box-shadow 0.25s ease, border-color 0.25s ease;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.4);
            position: relative;
            overflow: hidden;
            will-change: transform;
            contain: paint;
        }

        .social-ring::after {
            content: '';
            position: absolute;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle at 30% 30%, rgba(255,255,255,0.5), transparent 70%);
            opacity: 0;
            transition: opacity 0.2s;
            pointer-events: none;
        }

        .social-ring:hover {
            transform: scale(1.18) translateY(-8px);
            border-color: cyan;
            box-shadow: 0 0 35px cyan;
        }
        .social-ring:hover::after { opacity: 0.4; }

        /* email */
        .email-bubble {
            text-align: center;
            font-size: 1.2rem;
            background: rgba(0, 20, 40, 0.6);
            padding: 1rem 2rem;
            border-radius: 60px;
            width: fit-content;
            margin: 2.5rem auto 0;
            border: 1px solid rgba(0, 200, 255, 0.3);
            backdrop-filter: blur(5px);
            contain: paint;
        }

        .email-bubble a {
            color: #a7e8ff;
            text-decoration: none;
            border-bottom: 1px dashed #3f9eff;
        }

        /* secci√≥n SOBRE NOSOTROS + paisajes 4,5,6 integrados */
        .about-section {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1.8rem;
            margin: 5rem 0 3rem;
            contain: layout style paint;
        }

        .about-card {
            background: rgba(18, 30, 48, 0.5);
            backdrop-filter: blur(12px);
            border-radius: 2.5rem;
            padding: 2rem 1.8rem;
            border: 1px solid rgba(90, 180, 255, 0.2);
            transition: transform 0.25s ease, box-shadow 0.25s ease, border-color 0.25s ease;
            box-shadow: 0 25px 40px -15px #000;
            position: relative;
            overflow: hidden;
            z-index: 2;
            will-change: transform;
            contain: content;
        }

        .about-card:hover {
            transform: translateY(-20px) scale(1.02);
            border-color: cyan;
            box-shadow: 0 30px 60px -10px #0066ff;
        }

        /* fondo de paisaje (integraci√≥n) */
        .about-card::before {
            content: "";
            position: absolute;
            inset: 0;
            background-size: cover;
            background-position: center 30%;
            opacity: 0.15;
            z-index: -1;
            transition: opacity 0.35s ease, transform 0.45s ease;
            transform: translateZ(0);
            will-change: transform, opacity;
        }

        .about-card:hover::before {
            opacity: 0.3;
            transform: scale(1.1);
        }

        /* asignar paisajes 4,5,6 */
        .card-paisaje-4::before { background-image: url('https://img.heresirc.com/Imagenes/paisaje4.jpg'); }
        .card-paisaje-5::before { background-image: url('https://img.heresirc.com/Imagenes/paisaje5.jpg'); }
        .card-paisaje-6::before { background-image: url('https://img.heresirc.com/Imagenes/paisaje6.jpg'); }

        .about-icon {
            font-size: 2.8rem;
            margin-bottom: 1.5rem;
            color: #9cdbff;
            filter: drop-shadow(0 0 12px cyan);
        }

        .about-card h3 {
            font-size: 2rem;
            margin-bottom: 1rem;
            font-weight: 700;
            background: linear-gradient(145deg, #fff, #b7dfff);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .about-card p {
            line-height: 1.6;
            font-size: 1.1rem;
            color: #ddddee;
        }

        .valor-item {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin: 1.2rem 0;
            background: rgba(0, 255, 255, 0.05);
            padding: 0.8rem 1.2rem;
            border-radius: 50px;
            border-left: 4px solid cyan;
            transition: transform 0.18s ease, background 0.18s ease;
            will-change: transform;
            contain: paint;
        }

        .valor-item:hover { transform: translateY(-2px); }

        .valor-item i {
            color: cyan;
            width: 2rem;
            font-size: 1.6rem;
        }

        /* imagen flotante adicional (decoraci√≥n) */
        .floating-deco {
            position: relative;
            width: 100%;
            height: 150px;
            margin: 2rem 0;
            contain: paint;
        }

        .mini-float {
            position: absolute;
            width: 100px;
            height: 100px;
            border-radius: 30px;
            object-fit: cover;
            border: 2px solid rgba(255,255,255,0.2);
            box-shadow: 0 25px 40px -10px black;
            animation: slowDrift 12s infinite alternate ease-in-out;
            opacity: 0.7;
            will-change: transform;
            transform: translateZ(0);
        }

        .mini-float:nth-child(1) { left: 0; top: 0; animation-delay: 0s; }
        .mini-float:nth-child(2) { left: 40%; top: -30px; animation-delay: -3s; width: 130px; }
        .mini-float:nth-child(3) { right: 0; top: 20px; animation-delay: -6s; }

        @keyframes slowDrift {
            0% { transform: translate(0, 0) rotate(-3deg); }
            100% { transform: translate(30px, -30px) rotate(5deg); }
        }

        /* pie creativo */
        .footer-bless {
            text-align: center;
            padding: 3rem 0 1rem;
            font-size: 0.95rem;
            color: #8a9bb5;
            border-top: 1px solid rgba(255,255,255,0.05);
            margin-top: 5rem;
            contain: paint;
        }

        /* responsividad */
        @media (max-width: 900px) {
            .about-section { grid-template-columns: 1fr; gap: 2rem; }
            .glitch-big { font-size: 3.2rem; }
            .smart-nav { gap: 0.8rem; padding: 0.8rem 1.2rem; }
        }

        /* Respeta Reduce Motion (no cambia tu dise√±o por defecto; solo para usuarios que lo pidan) */
        @media (prefers-reduced-motion: reduce) {
            .avatar-cosmic, .glitch-big, .mini-float { animation: none !important; }
            .smart-nav a, .social-ring, .about-card, .profile-img { transition: none !important; }
        }
    </style>
</head>

<body>
<canvas id="particles-canvas"></canvas>

<div class="site-wrapper">
    <!-- navegaci√≥n elegante -->
    <nav class="smart-nav">
        <a href="#inicio"><i class="fas fa-home" style="margin-right: 6px;"></i>Inicio</a>
        <a href="#nosotros"><i class="fas fa-users" style="margin-right: 6px;"></i>Nosotros</a>
        <a href="#mision"><i class="fas fa-bullseye" style="margin-right: 6px;"></i>Misi√≥n</a>
        <a href="#vision"><i class="fas fa-eye" style="margin-right: 6px;"></i>Visi√≥n</a>
        <a href="#valores"><i class="fas fa-gem" style="margin-right: 6px;"></i>Valores</a>
    </nav>

    <!-- tarjeta principal / inicio -->
    <div id="inicio" class="hero-card">
        <div class="avatar-cosmic">
            <img src="https://img.heresirc.com/Imagenes/perfil.jpg" alt="Heresirc" class="profile-img" id="profileImg"
                 onerror="this.parentElement.classList.add('fallback-active'); this.style.display='none';">
        </div>
        <h1 class="glitch-big">HERESIRC</h1>
        <p class="bio-neon">‚úß creador de horizontes ¬∑ aventura visual ‚úß</p>

        <div class="social-orbit">
            <a href="#" class="social-ring" style="color: #1877f2;"><i class="fab fa-facebook-f"></i></a>
            <a href="#" class="social-ring" style="color: #e4405f;"><i class="fab fa-instagram"></i></a>
            <a href="#" class="social-ring" style="color: #f0f0f0;"><i class="fab fa-github"></i></a>
            <a href="#" class="social-ring" style="color: #0a66c2;"><i class="fab fa-linkedin-in"></i></a>
        </div>

        <div class="email-bubble">
            üì¨ <a href="mailto:hola@heresirc.space">hola@heresirc.space</a>
        </div>
    </div>

    <!-- SECCI√ìN SOBRE NOSOTROS / VISI√ìN / MISI√ìN / VALORES (con paisajes 4,5,6) -->
    <div class="about-section" id="nosotros">
        <!-- tarjeta 1: Sobre Nosotros (paisaje4) -->
        <div class="about-card card-paisaje-4">
            <div class="about-icon"><i class="fas fa-mountain-sun"></i></div>
            <h3>SOBRE NOSOTROS</h3>
            <p>Somos una expedici√≥n creativa que nace del <strong>paisaje 4</strong>: valles infinitos y neblina matutina. As√≠ como ese horizonte evoca misterio y calma, nosotros exploramos lo desconocido para contar historias visuales que conectan.</p>
            <div style="margin-top: 1.2rem; background: rgba(0,0,0,0.2); padding: 0.8rem; border-radius: 2rem;">
                <i class="fas fa-cloud" style="color: cyan; margin-right: 8px;"></i>  esencia n√≥mada ¬∑ autenticidad
            </div>
        </div>

        <!-- tarjeta 2: Misi√≥n (paisaje5) -->
        <div class="about-card card-paisaje-5" id="mision">
            <div class="about-icon"><i class="fas fa-map-location-dot"></i></div>
            <h3>MISI√ìN</h3>
            <p>Inspirados en el <strong>paisaje 5</strong> ‚Äîun ca√±√≥n al atardecer donde la luz transforma la piedra‚Äî nuestra misi√≥n es moldear ideas digitales con calidez humana y atrevimiento. Buscamos que cada proyecto refleje la grandeza de lo ef√≠mero.</p>
            <p style="margin-top: 1rem;">‚ú¶ Transformar lo ordinario en √©pico ‚ú¶</p>
        </div>

        <!-- tarjeta 3: Visi√≥n (paisaje6) -->
        <div class="about-card card-paisaje-6" id="vision">
            <div class="about-icon"><i class="fas fa-eye"></i></div>
            <h3>VISI√ìN</h3>
            <p>Como el <strong>paisaje 6</strong>: un archipi√©lago bajo la aurora boreal, aspiramos a conectar continentes creativos. So√±amos con ser faro de innovaci√≥n, donde la tecnolog√≠a y la poes√≠a visual se encuentren para inspirar a una comunidad global.</p>
        </div>
    </div>

    <!-- VALORES -->
    <div id="valores" style="background: rgba(0, 10, 25, 0.4); backdrop-filter: blur(10px); border-radius: 4rem; padding: 3rem 2.5rem; margin: 2rem 0 3rem; border: 1px solid rgba(0,255,255,0.15);">
        <h2 style="font-size: 3rem; font-weight: 800; margin-bottom: 2rem; display: flex; gap: 15px; align-items: center; color: #fff; text-shadow: 0 0 10px cyan;">
            <i class="fas fa-gem" style="color: cyan;"></i> VALORES HERESIRC <i class="fas fa-gem" style="color: cyan;"></i>
        </h2>
        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px,1fr)); gap: 1.5rem;">

            <div class="valor-item" style="border-left-color: #ff9f6e;">
                <i class="fas fa-leaf"></i>
                <span><strong>PAISAJE 4 ¬∑ serenidad</strong> ‚Äî la quietud de un valle nos ense√±a a escuchar.</span>
            </div>

            <div class="valor-item" style="border-left-color: #c0a0ff;">
                <i class="fas fa-fire"></i>
                <span><strong>PAISAJE 5 ¬∑ transformaci√≥n</strong> ‚Äî la roca se vuelve luz al atardecer.</span>
            </div>

            <div class="valor-item" style="border-left-color: #72f0d0;">
                <i class="fas fa-water"></i>
                <span><strong>PAISAJE 6 ¬∑ inmensidad</strong> ‚Äî como el archipi√©lago, abrazamos diversidad.</span>
            </div>

            <div class="valor-item"><i class="fas fa-hand-peace"></i> <span>integridad radical</span></div>
            <div class="valor-item"><i class="fas fa-infinity"></i> <span>curiosidad infinita</span></div>
            <div class="valor-item"><i class="fas fa-hand-holding-heart"></i> <span>comunidad</span></div>
        </div>
    </div>

    <!-- paisajes flotantes -->
    <div class="floating-deco">
        <img src="https://img.heresirc.com/Imagenes/paisaje4.jpg" alt="" class="mini-float" loading="lazy" decoding="async">
        <img src="https://img.heresirc.com/Imagenes/paisaje5.jpg" alt="" class="mini-float" loading="lazy" decoding="async">
        <img src="https://img.heresirc.com/Imagenes/paisaje6.jpg" alt="" class="mini-float" loading="lazy" decoding="async">
    </div>

    <div class="footer-bless">
        ‚ú¶ HERESIRC ¬∑ donde los paisajes 4,5,6 se vuelven prop√≥sito ‚ú¶ <br>
        ¬© 2025 ‚Äî interactividad y creatividad sin l√≠mites
    </div>
</div>

<!-- script de part√≠culas (OPTIMIZADO, misma est√©tica) -->
<script>
    (function () {
        const canvas = document.getElementById('particles-canvas');
        const ctx = canvas.getContext('2d', { alpha: true });

        let w = 0, h = 0, dpr = 1;
        let particles = [];

        // Config
        const MAX_DPR = 1.75;          // evita costos absurdos en pantallas 3x
        const CELL_SIZE = 120;         // tama√±o de celda para grid (‚âà distancia de conexi√≥n)
        const LINK_DIST = 110;         // distancia m√°xima de l√≠nea (tu valor original)
        const LINK_DIST2 = LINK_DIST * LINK_DIST;

        let rafId = 0;
        let running = true;

        function clamp(v, min, max) { return v < min ? min : (v > max ? max : v); }

        function resize() {
            w = window.innerWidth;
            h = window.innerHeight;

            dpr = Math.min(window.devicePixelRatio || 1, MAX_DPR);

            canvas.width = Math.floor(w * dpr);
            canvas.height = Math.floor(h * dpr);
            canvas.style.width = w + 'px';
            canvas.style.height = h + 'px';

            // Escala el contexto para trabajar en coordenadas CSS (m√°s simple)
            ctx.setTransform(dpr, 0, 0, dpr, 0, 0);

            // Recalcular cantidad de part√≠culas de forma parecida a la original, pero controlada
            const target = Math.floor((w * h) / 7500) + 30;
            const pCount = clamp(target, 40, 140); // l√≠mite para evitar ca√≠das en pantallas enormes

            particles = new Array(pCount).fill(0).map(() => ({
                x: Math.random() * w,
                y: Math.random() * h,
                vx: (Math.random() - 0.5) * 0.2,
                vy: (Math.random() - 0.5) * 0.2,
                size: Math.random() * 3 + 1,
                a: Math.random() * 0.4 + 0.2 // alpha (guardado para no crear strings)
            }));
        }

        // Debounce de resize (evita que dispare 50 veces)
        let resizeT = 0;
        function onResize() {
            window.clearTimeout(resizeT);
            resizeT = window.setTimeout(resize, 120);
        }

        // Grid (spatial hashing) para evitar O(n^2)
        function buildGrid() {
            const grid = new Map();
            const inv = 1 / CELL_SIZE;

            for (let i = 0; i < particles.length; i++) {
                const p = particles[i];
                const cx = (p.x * inv) | 0;
                const cy = (p.y * inv) | 0;
                const key = (cx << 16) ^ cy;
                let arr = grid.get(key);
                if (!arr) { arr = []; grid.set(key, arr); }
                arr.push(i);
            }
            return grid;
        }

        function drawFrame() {
            if (!running) return;

            ctx.clearRect(0, 0, w, h);

            // 1) dibuja part√≠culas
            for (let i = 0; i < particles.length; i++) {
                const p = particles[i];
                ctx.beginPath();
                ctx.arc(p.x, p.y, p.size, 0, Math.PI * 2);
                ctx.fillStyle = `rgba(100, 200, 250, ${p.a})`;
                ctx.fill();
            }

            // 2) l√≠neas usando grid (solo vecinas)
            const grid = buildGrid();
            ctx.lineWidth = 0.5;

            const inv = 1 / CELL_SIZE;
            for (let i = 0; i < particles.length; i++) {
                const p = particles[i];
                const cx = (p.x * inv) | 0;
                const cy = (p.y * inv) | 0;

                // revisa celdas vecinas (3x3)
                for (let oy = -1; oy <= 1; oy++) {
                    for (let ox = -1; ox <= 1; ox++) {
                        const nx = cx + ox, ny = cy + oy;
                        const key = (nx << 16) ^ ny;
                        const bucket = grid.get(key);
                        if (!bucket) continue;

                        for (let b = 0; b < bucket.length; b++) {
                            const j = bucket[b];
                            if (j <= i) continue; // evita duplicados

                            const q = particles[j];
                            const dx = p.x - q.x;
                            const dy = p.y - q.y;
                            const d2 = dx * dx + dy * dy;

                            if (d2 < LINK_DIST2) {
                                const dist = Math.sqrt(d2);
                                const alpha = 0.12 * (1 - dist / LINK_DIST);
                                ctx.beginPath();
                                ctx.moveTo(p.x, p.y);
                                ctx.lineTo(q.x, q.y);
                                ctx.strokeStyle = `rgba(130, 200, 255, ${alpha})`;
                                ctx.stroke();
                            }
                        }
                    }
                }
            }

            // 3) actualizar part√≠culas
            for (let i = 0; i < particles.length; i++) {
                const p = particles[i];
                p.x += p.vx;
                p.y += p.vy;

                if (p.x < 0 || p.x > w) p.vx *= -0.99;
                if (p.y < 0 || p.y > h) p.vy *= -0.99;

                p.x = p.x < 0 ? 0 : (p.x > w ? w : p.x);
                p.y = p.y < 0 ? 0 : (p.y > h ? h : p.y);
            }

            rafId = requestAnimationFrame(drawFrame);
        }

        // Pausa si la pesta√±a no est√° visible (gran mejora real)
        function onVisibilityChange() {
            if (document.hidden) {
                running = false;
                if (rafId) cancelAnimationFrame(rafId);
                rafId = 0;
            } else {
                if (!running) {
                    running = true;
                    rafId = requestAnimationFrame(drawFrame);
                }
            }
        }

        window.addEventListener('resize', onResize, { passive: true });
        document.addEventListener('visibilitychange', onVisibilityChange);

        resize();
        rafId = requestAnimationFrame(drawFrame);
    })();

    // manejo de fallback perfil (si no carga)
    const profileImg = document.getElementById('profileImg');
    if (profileImg) {
        profileImg.addEventListener('error', function () {
            const parent = this.closest('.avatar-cosmic');
            if (parent) {
                parent.style.background = '#102030';
                parent.insertAdjacentHTML(
                    'beforeend',
                    '<div style="position:absolute; inset:10px; background:radial-gradient(circle at 30% 30%, #1e3b5a, #0f1a2f); border-radius:50%; display:flex; align-items:center; justify-content:center; color:white; font-weight:800;">HERESIRC</div>'
                );
                this.style.display = 'none';
            }
        }, { passive: true });
    }
</script>
</body>
</html>
